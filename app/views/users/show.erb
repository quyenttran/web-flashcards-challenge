<div class="card user-profile">

  <h2 class="game-header"><%= @user.username %></h2>

  <% decks = @user.rounds.map{|round| round.deck}.uniq %>
  <% decks.each do |deck| %>
    <h3><%= deck.name %></h3>
    <table class="user-stats-table">
      <tr class="user-stats-tr">
        <th class="user-stats-tcell">Date</th>
        <th class="user-stats-tcell">Cards in Deck</th>
        <th class="user-stats-tcell">First Guesses Correct</th>
        <th class="user-stats-tcell">Total Guesses</th>
      </tr>

      <% deck.rounds.each do |round| %>
        <% if round.user == @user %>
            <tr class="user-stats-tr">
              <td class="user-stats-tcell"><%= round.created_at.strftime("%B, %d, %Y") %></td>
              <td class="user-stats-tcell"><%= deck.cards.count %></td>
              <td class="user-stats-tcell"><%= round.first_round_corrects %></td>
              <td class="user-stats-tcell"><%= round.guesses.count %></td>
            </tr>
        <% end %>
    <% end %>
    </table>
  <% end %>
</div>
